# APES Prompt Improver Environment Configuration
# Copy this file to .env and configure with your actual values
# NEVER commit .env to version control - it contains sensitive data

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL) - ALL REQUIRED
# =============================================================================
# Complete database URL (preferred method)
DATABASE_URL=postgresql+asyncpg://username:password@hostname:5432/database_name

# OR use individual components (alternative method)
POSTGRES_HOST=hostname_or_ip
POSTGRES_PORT=5432
POSTGRES_DATABASE=prompt_improver
POSTGRES_USERNAME=your_username
POSTGRES_PASSWORD=your_secure_password

# Database Pool Configuration
POSTGRES_DATABASE_POOL_SIZE=10
POSTGRES_DATABASE_MAX_OVERFLOW=20
POSTGRES_DATABASE_POOL_TIMEOUT=30
POSTGRES_POOL_MIN_SIZE=4
POSTGRES_POOL_MAX_SIZE=16
POSTGRES_POOL_TIMEOUT=10

# =============================================================================
# REDIS CONFIGURATION - ALL REQUIRED
# =============================================================================
# Complete Redis URL (preferred method)
REDIS_URL=redis://username:password@hostname:6379/0

# OR use individual components (alternative method)
REDIS_HOST=hostname_or_ip
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password
REDIS_SSL=false
REDIS_MAX_CONNECTIONS=10
REDIS_REDIS_MAX_CONNECTIONS=100
REDIS_REDIS_TIMEOUT=5

# =============================================================================
# ML SERVICES CONFIGURATION - REQUIRED FOR ML FEATURES
# =============================================================================
# ML Database Configuration
ML_POSTGRES_HOST=ml_hostname_or_ip
ML_POSTGRES_PORT=5432
ML_POSTGRES_DATABASE=ml_automl
ML_POSTGRES_USERNAME=ml_username
ML_POSTGRES_PASSWORD=ml_secure_password

# ML Redis Configuration
ML_REDIS_HOST=ml_redis_hostname_or_ip
ML_REDIS_PORT=6379
ML_REDIS_PASSWORD=ml_redis_password
ML_REDIS_DB=1

# MLFlow Configuration
ML_MLFLOW_TRACKING_URI=http://mlflow_host:5000
ML_MLFLOW_HOST=mlflow_hostname_or_ip
ML_MLFLOW_PORT=5000

# =============================================================================
# EXTERNAL API CONFIGURATION - OPTIONAL BUT RECOMMENDED
# =============================================================================
# OpenAI API Configuration
EXTERNAL_API_OPENAI_API_KEY=your_openai_api_key
EXTERNAL_API_OPENAI_API_URL=https://api.openai.com/v1

# HuggingFace Configuration
EXTERNAL_API_HUGGINGFACE_API_KEY=your_huggingface_api_key
EXTERNAL_API_HUGGINGFACE_API_URL=https://huggingface.co/api

# APES API Configuration
EXTERNAL_API_APES_API_URL=https://api.apes.local

# =============================================================================
# MCP SERVER CONFIGURATION - REQUIRED
# =============================================================================
MCP_HOST=0.0.0.0
MCP_PORT=8080
MCP_TIMEOUT=30
MCP_BATCH_SIZE=100
MCP_SESSION_MAXSIZE=1000
MCP_SESSION_TTL=3600
MCP_SESSION_CLEANUP_INTERVAL=300

# =============================================================================
# SECURITY CONFIGURATION - CRITICAL: CHANGE IN PRODUCTION
# =============================================================================
SECURITY_SECRET_KEY=your_secure_32_character_or_longer_secret_key_here_change_in_production
SECURITY_ENCRYPTION_KEY=your_encryption_key_for_sensitive_data
SECURITY_TOKEN_EXPIRY_SECONDS=3600
SECURITY_HASH_ROUNDS=12
SECURITY_MAX_LOGIN_ATTEMPTS=5

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
MONITORING_METRICS_ENABLED=true
MONITORING_HEALTH_CHECK_INTERVAL=30.0
MONITORING_METRICS_COLLECTION_INTERVAL=60.0
MONITORING_LOG_LEVEL=INFO
MONITORING_LOG_FORMAT=json
MONITORING_OPENTELEMETRY_ENDPOINT=http://otel-collector:4317

# =============================================================================
# OPENTELEMETRY CONFIGURATION
# =============================================================================
OTEL_SERVICE_NAME=apes-prompt-improver
OTEL_SERVICE_VERSION=1.0.0
OTEL_ENVIRONMENT=development
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_EXPORTER_OTLP_HTTP_ENDPOINT=http://otel-collector:4318
OTEL_EXPORTER_OTLP_INSECURE=true
OTEL_TRACE_EXPORTER=console
OTEL_METRIC_EXPORTER=console
OTEL_SAMPLING_STRATEGY=parent_based
OTEL_SAMPLING_RATE=0.1
OTEL_RATE_LIMIT_PER_SECOND=100
OTEL_TRACING_ENABLED=true
OTEL_METRICS_ENABLED=true
OTEL_LOGGING_ENABLED=true
OTEL_AUTO_INSTRUMENTATION_ENABLED=true

# =============================================================================
# PERFORMANCE & OPTIMIZATION
# =============================================================================
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1000
TARGET_RESPONSE_TIME_MS=200
CACHE_TTL_SECONDS=300
QUERY_TIMEOUT_SECONDS=30

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TEST_DATABASE_URL=postgresql://localhost:5432/apes_test
TEST_DB_NAME=apes_test

# =============================================================================
# CONTAINER & DEPLOYMENT CONFIGURATION
# =============================================================================
# Docker and Kubernetes deployments
DEPLOYMENT_MODE=standalone
REPLICA_COUNT=1
CONTAINER_REGISTRY=your_registry_url
IMAGE_TAG=latest

# Load balancer and proxy configuration
PROXY_ENABLED=false
PROXY_HOST=proxy_hostname
PROXY_PORT=80
LOAD_BALANCER_ENABLED=false
HEALTH_CHECK_PATH=/health

# Multi-region deployment
PRIMARY_REGION=us-east-1
BACKUP_REGIONS=us-west-2,eu-west-1
CROSS_REGION_REPLICATION_ENABLED=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_ML_ORCHESTRATION_ENABLED=true
FEATURE_REAL_TIME_ANALYTICS_ENABLED=true
FEATURE_ADVANCED_CACHING_ENABLED=true
FEATURE_DISTRIBUTED_TRACING_ENABLED=true
FEATURE_AUTO_SCALING_ENABLED=false

# =============================================================================
# DEVELOPMENT MODE OVERRIDES
# =============================================================================
DEVELOPMENT_MODE=true
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_PROFILING=false
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================
# Only set these for production environments
PRODUCTION_OPTIMIZATIONS_ENABLED=false
CONNECTION_POOL_OPTIMIZATION=false
QUERY_CACHE_ENABLED=true
RESPONSE_COMPRESSION_ENABLED=true
STATIC_ASSET_CACHING_ENABLED=true

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
DISASTER_RECOVERY_ENABLED=false
FAILOVER_REGION=us-west-2

# =============================================================================
# SECURITY HARDENING
# =============================================================================
SECURITY_HARDENING_ENABLED=false
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
CSRF_PROTECTION_ENABLED=true
RATE_LIMITING_ENABLED=true
SECURITY_HEADERS_ENABLED=true
INPUT_VALIDATION_STRICT_MODE=false

# =============================================================================
# INFRASTRUCTURE MONITORING
# =============================================================================
INFRASTRUCTURE_MONITORING_ENABLED=false
RESOURCE_USAGE_ALERTS_ENABLED=false
PERFORMANCE_ALERTS_ENABLED=false
ERROR_RATE_THRESHOLD=5.0
RESPONSE_TIME_THRESHOLD_MS=1000

# =============================================================================
# SECRETS MANAGEMENT INTEGRATION
# =============================================================================
# For production environments, consider using:
# - AWS Secrets Manager: SECRETS_PROVIDER=aws_secrets_manager
# - Azure Key Vault: SECRETS_PROVIDER=azure_key_vault  
# - HashiCorp Vault: SECRETS_PROVIDER=vault
# - Kubernetes Secrets: SECRETS_PROVIDER=k8s_secrets
SECRETS_PROVIDER=environment
SECRETS_PATH=/run/secrets

# =============================================================================
# SECURITY NOTE
# =============================================================================
# This file contains examples with placeholder values.
# Replace ALL values with your actual configuration.
# Use strong, unique passwords and keys in production.
# Consider using secrets management tools for production deployments.
# Regularly rotate credentials and update security configurations.